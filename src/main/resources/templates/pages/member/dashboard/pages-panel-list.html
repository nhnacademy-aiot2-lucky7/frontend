<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">

<head>
    <meta charset="utf-8"/>
    <title th:text="${dashboardTitle}">차트 | Lucky Seven</title>
    <link href="/css/dashboard/dashboard.css" rel="stylesheet"/>
    <style>
        .panel-info-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            padding: 2rem;
            background-color: #f9f9f9;
        }

        .panel-info-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .panel-info-header h1 {
            font-size: 2rem;
            font-weight: bold;
            color: #333;
        }

        .panel-add-btn {
            padding: 0.5rem 1rem;
            background-color: #007bff;
            color: #fff;
            text-decoration: none;
            border-radius: 0.375rem;
            transition: background-color 0.2s ease-in-out;
        }

        .panel-add-btn:hover {
            background-color: #0056b3;
        }

        .panel-grid-scrollable {
            display: grid;
            grid-template-columns: repeat(4, 1fr); /* 고정된 4분할 */
            gap: 1.5rem;
        }

        .panel-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: #222;
            text-align: center;
        }
    </style>
</head>

<body>
<section layout:fragment="content">
    <main class="panel-info-container">
        <section class="panel-info-header">
            <h1 th:text="${dashboardTitle} ?: '차트 내역'">차트 내역</h1>
            <a th:href="@{/panels(dashboardUid=${dashboardUid})}" class="panel-add-btn">+ 차트 추가</a>
        </section>

        <div id="panelList" class="panel-grid-scrollable">
            <div th:each="panel : ${panels}" class="panel-card">
                <h3 th:text="${panel.panelTitle} ?: '제목 없음'" class="panel-title"></h3>
                <iframe th:src="'https://grafana.luckyseven.live/d-solo/' + ${panel.dashboardUid}
                                + '?orgId=1&from=' + ${panel.from}
                                + '&to=' + ${panel.now}
                                + '&panelId=' + ${panel.panelId}"
                        width="450"
                        height="200"
                        frameborder="0"
                        class="grafana-iframe">
                </iframe>
            </div>
        </div>
    </main>
</section>
</body>
</html>